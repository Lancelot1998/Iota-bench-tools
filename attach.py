import requests
import json
from iota import Iota, Address, ProposedTransaction, Tag, Transaction, TryteString
api = Iota("http://localhost:14265")
command = {
  "command": "getTransactionsToApprove",
  "depth": 3
}

stringified = json.dumps(command)

headers = {
    'content-type': 'application/json',
    'X-IOTA-API-Version': '1'
}

request = requests.post(url="http://localhost:14265", data=stringified, headers=headers)
returnData = request.text

jsonData = json.loads(returnData)

print(jsonData)
txn_2 =\
  ProposedTransaction(
    address =
      Address(
        b'FJHSSHBZTAKQNDTIKJYCZBOZDGSZANCZSWCNWUOCZXFADNOQSYAHEJPXRLOVPNOQFQXXGEGVDGICLMOXX'
      ),

    message = TryteString.from_unicode('thx fur cheezburgers'),
    tag     = Tag(b'KITTEHS'),
    value   = 0,
  )

c = api.prepare_transfer([txn_2])["trytes"]
print(c)
command = { 
"command": "attachToTangle", 
"trunkTransaction": jsonData["trunkTransaction"],
"branchTransaction": jsonData["branchTransaction"],
"minWeightMagnitude": 1,
"trytes": "HDWCLDEAUCIDFDEARCWCTCTCNDQCIDFDVCTCFDGD99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999FJHSSHBZTAKQNDTIKJYCZBOZDGSZANCZSWCNWUOCZXFADNOQSYAHEJPXRLOVPNOQFQXXGEGVDGICLMOXX999999999999999999999999999DJTTEHS99999999999999999999SNTBK9D99999999999999999999QLFDLFKCEHNKZLIOJEC9KCQRSALAAKDZYKXKWUFUPZXYC99QVWEKXVEILCVHWHWPLTFLAWGTVDQOSFZBY999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999KITTEHS99999999999999999999999999999999999999999999999999999999999999999999999999"
}

sringified = json.dumps(command)

headers = {
    'content-type': 'application/json',
    'X-IOTA-API-Version': '1'
}

request = requests.post(url="http://localhost:14265", data=stringified, headers=headers)
returnData = request.text

jsonData = json.loads(returnData)

print(jsonData)
